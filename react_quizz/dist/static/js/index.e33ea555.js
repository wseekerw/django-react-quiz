(()=>{"use strict";var e={3326:function(e,s,t){var n=t(5893);t(4933);var i=t(7294),l=t(745),r=t(8695),a=t(5005),o=t(2293),c=t(3709),d=t(1722);let u=e=>{let{show:s,onHide:t,quiz:l,addQuiz:u}=e,m=(0,d.v9)(e=>e.quizzes.questions),{register:h,control:x,handleSubmit:b,reset:j,formState:{errors:p,touchedFields:q,isSubmitted:v,isValid:f}}=(0,o.cI)({defaultValues:{name:"",questions:[{question:"",answer:""}]},mode:"onChange"}),z=()=>{j({title:"",questions:[]}),t()};(0,i.useEffect)(()=>{l?(j({title:l.title,questions:l.questions}),N(l.questions)):(j({title:"",questions:[]}),N([]))},[l,j]);let{fields:w,append:g,remove:y,replace:N}=(0,o.Dq)({control:x,name:"questions"}),[A,S]=(0,i.useState)(null),O=e=>{g({question:e.question,answer:e.answer}),S(null)},C=m.map(e=>({label:e.question,value:e.id,...e}));return(0,n.jsxs)(r.Z,{show:s,onHide:t,children:[(0,n.jsxs)(r.Z.Header,{className:"col-lg-12 col-md-12 col-sm-12 modal-header d-flex align-items-center",children:[(0,n.jsx)(a.Z,{onClick:()=>g({question:"",answer:""}),type:"button",className:"btn btn-primary mb-4 mt-3",children:"Add a question"}),(0,n.jsx)(r.Z.Title,{children:(null==l?void 0:l.id)?"Edit Quiz":"Add Quiz"}),(0,n.jsx)("button",{type:"button",className:"btn ms-auto","aria-label":"Close",onClick:t,children:(0,n.jsx)("h3",{children:"\xd7"})})]}),(0,n.jsxs)(r.Z.Body,{children:[(0,n.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12",children:[(0,n.jsx)("label",{htmlFor:"question",children:"Reuse a previously saved question:"}),(0,n.jsx)(c.ZP,{id:"question",options:C,onChange:e=>{S(e)},value:A,placeholder:"Select a question",isClearable:!1,isSearchable:!0}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary mb-4 mt-3",disabled:!A,onClick:()=>{A&&O(A)},children:"Add reused question"})]}),(0,n.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 mt-3",children:(0,n.jsxs)("form",{id:"quiz-form",onSubmit:b(e=>{e.id=(null==l?void 0:l.id)??null,u(e),z()}),children:[(0,n.jsx)("h3",{children:l?"Edit quiz":"Add new quiz"}),(0,n.jsx)("label",{className:"form-label mt-4",children:"Title:"}),(0,n.jsx)("input",{placeholder:"Enter title",className:"form-control",...h("title",{required:!0})}),p.name&&(0,n.jsx)("div",{className:"text-danger mb-4",children:"Quiz title is required"}),(0,n.jsx)("p",{children:"Questions: "}),w.map((e,s)=>{var t,i,l,r,a,o,c,d;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("span",{children:[s+1,". "]}),(0,n.jsx)("label",{className:"form-label",children:"Question:"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{className:"form-control",...h(`questions.${s}.question`,{required:!0}),placeholder:"Question"}),((null==(i=p.questions)||null==(t=i[s])?void 0:t.question)&&(null==(r=q.questions)||null==(l=r[s])?void 0:l.question)||v)&&(0,n.jsx)("div",{className:"text-danger mt-1",children:"Question is required"})]}),(0,n.jsx)("br",{}),(0,n.jsxs)("span",{children:[s+1,". "]}),(0,n.jsx)("label",{className:"form-label",children:"Answer:"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{className:"form-control",...h(`questions.${s}.answer`,{required:!0}),placeholder:"Answer"}),((null==(o=p.questions)||null==(a=o[s])?void 0:a.answer)&&(null==(d=q.questions)||null==(c=d[s])?void 0:c.answer)||v)&&(0,n.jsx)("div",{className:"text-danger mt-1",children:"Answer is required"}),(0,n.jsx)("br",{}),(0,n.jsxs)("button",{onClick:()=>{y(s)},type:"button",className:"btn btn-danger mb-4",children:["Remove ",s+1,". question"]})]},e.id)})]})})]}),(0,n.jsx)(r.Z.Footer,{className:"modal-footer",children:(0,n.jsx)("button",{form:"quiz-form",disabled:!f||w.length<1,className:"btn btn-primary mb-4 float-end",type:"submit",children:"Submit quiz"})})]})};var m=t(3672);let h=(0,m.oM)({name:"quizzes",initialState:{quizzes:[],questions:[]},reducers:{setQuizzesAction(e,s){e.quizzes=s.payload},addQuizAction(e,s){e.quizzes.push(s.payload)},deleteQuizAction(e,s){e.quizzes=e.quizzes.filter(e=>e.id!==s.payload)},updateQuizAction(e,s){let t=e.quizzes.findIndex(e=>e.id===s.payload.id);-1!==t&&(e.quizzes[t]=s.payload)},setQuestionsAction(e,s){e.questions=[...e.questions,...s.payload]}}}),{addQuizAction:x,deleteQuizAction:b,updateQuizAction:j,setQuestionsAction:p,setQuizzesAction:q}=h.actions,v=h.reducer;var f=t(4621),z=t(430);let w="http://localhost:8000/api/quizzes/",g=async()=>(await z.Z.get(w+"list/")).data,y=async e=>(await z.Z.post(w+"create/",e)).data,N=async(e,s)=>(await z.Z.put(`${w+"update/"}${e}/`,s)).data,A=async e=>(await z.Z.delete(`${w+"delete/"}${e}/`)).data,S=async()=>(await z.Z.get("http://localhost:8000/api/questions/deleted/")).data,O=()=>{let e=(0,f.s0)(),s=(0,d.I0)();(0,i.useEffect)(()=>{g().then(e=>{s(q(e.quizzes)),s(p(e.deleted_questions))}).catch(e=>console.error(e))},[s]);let t=(0,d.v9)(e=>e.quizzes.quizzes),l=(0,d.v9)(e=>e.quizzes.questions),[r,a]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),m=e=>{c(e),a(!0)},h=e=>{A(e.id).then(e=>{s(q(e)),S().then(e=>{s(p(e))}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})};return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"row mb-5",children:(0,n.jsxs)("div",{className:"offset-lg-4 col-lg-4 offset-md-4 col-md-4 offset-sm-4 col-sm-4 text-center",children:[(0,n.jsx)("button",{onClick:()=>m(null),className:"btn btn-primary mt-2",children:"Add new quiz"}),r&&(0,n.jsx)(u,{addQuiz:e=>{e.id?N(e.id,e).then(e=>{s(j(e.quiz)),s(p(e.deleted_questions))}):y(e).then(e=>{s(x(e))}).catch(e=>{console.log(e)})},quiz:o,show:r,onHide:()=>{a(!1),c(null)}}),(0,n.jsxs)("div",{children:["Number of saved questions: ",l.length]})]})}),(0,n.jsx)("div",{className:"row",children:t.map(s=>(0,n.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,n.jsx)("div",{onClick:()=>m(s),className:"quiz-list card mb-5",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h5",{className:"card-title",children:s.title}),(0,n.jsxs)("p",{className:"card-text",children:["Number of questions: ",s.questions.length]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6",children:(0,n.jsx)("button",{className:"btn btn-warning mt-2",onClick:t=>{t.stopPropagation(),e(`/quizzes/${s.id}`)},children:"Start quiz"})}),(0,n.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6",children:(0,n.jsx)("button",{className:"btn btn-danger mt-2",onClick:e=>{e.stopPropagation(),h(s)},children:"Delete quiz"})})]})]})})},s.id))})]})})};var C=t(8164);let k=()=>{let{id:e}=(0,f.UO)(),s=(0,f.s0)(),t=(0,d.v9)(s=>s.quizzes.quizzes.find(s=>s.id===parseInt(e))),[l,r]=(0,i.useState)({questions:[],name:""}),[a,c]=(0,i.useState)(0),[u,m]=(0,i.useState)(0),[h,x]=(0,i.useState)(0);(0,i.useEffect)(()=>{if(t){let e=JSON.parse(JSON.stringify(t));e.questions=e.questions.map(e=>({...e,answered:!1,correct:!1,showAnswer:!1,lastSlide:!1})),e.questions.push({question:"",answer:"",lastSlide:!0,answered:!1,correct:!1,showAnswer:!1}),r(e),x(e.questions.length-1)}},[t]);let{register:b,handleSubmit:j,control:p,formState:{errors:q,touchedFields:v},getValues:z,watch:w}=(0,o.cI)({defaultValues:{submittedAnswers:Array.from({length:l.questions.length},()=>"")}}),{fields:g}=(0,o.Dq)({control:p,name:"submittedAnswers"}),y=e=>{let s=0,t=0;for(let n of e)n.answered&&(s+=1),n.correct&&(t+=1);c(s),m(t)},N=(e,s,t)=>{let n=e.answer.toLowerCase(),i=s.toLowerCase().includes(n),a=[...l.questions];a[t]={...a[t],answered:!0,correct:i},r(e=>({...e,questions:a})),y(a)},A=e=>{r(s=>{let t=s.questions.map(s=>s===e?{...s,showAnswer:!0}:s);return{...s,questions:t}})};return(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{role:"button",type:"button",onClick:()=>{s("/quizzes")},className:"btn btn-warning quizzes-back",children:"Back to quizzes"}),(0,n.jsx)("form",{children:(0,n.jsx)(C.Z,{interval:null,indicators:!0,wrap:!1,fade:!1,children:l.questions.map((e,t)=>{var i,r;let o=w(`submittedAnswers.${t}`);return(0,n.jsx)(C.Z.Item,{children:(0,n.jsx)("div",{className:"p-4",children:e.lastSlide?(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("p",{children:["Questions answered: ",a," / ",h]}),(0,n.jsxs)("p",{children:["Questions correct: ",u," / ",h]}),a===h?(0,n.jsxs)("p",{className:"last-page-text text-correct",children:["Congratulations you have finished the ",l.name," quizz"]}):a<h?(0,n.jsxs)("p",{className:"text-center last-page-text text-warning",children:["You have not finished the quizz. You still have ",h-a," questions to answer."]}):null,(0,n.jsx)("button",{role:"button",type:"button",onClick:()=>{s("/quizzes")},className:"btn btn-warning",children:"End quiz"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-center",children:e.question}),(0,n.jsx)("span",{className:"text",children:"Answer: "}),(0,n.jsx)("input",{disabled:e.answered,className:"form-control",...b(`submittedAnswers.${t}`),onKeyDown:e=>{"Space"===e.code&&e.stopPropagation()}}),(null==(i=q.submittedAnswers)?void 0:i[t])&&(null==(r=v.submittedAnswers)?void 0:r[t])&&(0,n.jsx)("div",{className:"text-danger",children:"Please provide an answer"}),(0,n.jsx)("div",{className:"text-center mt-2",children:(0,n.jsx)("button",{type:"button",className:"btn btn-primary",disabled:e.answered||!o||""===o.trim(),onClick:()=>{N(e,z().submittedAnswers[t],t)},children:"Submit answer"})}),e.answered&&(e.correct?(0,n.jsx)("div",{className:"text-center text text-correct",children:"Congratulations your answer is correct!"}):(0,n.jsxs)("div",{className:"text-center text text-correct",children:[(0,n.jsx)("p",{className:"text-not-correct",children:"Answer is not correct!"}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>A(e),children:"Show answer"}),e.showAnswer&&(0,n.jsx)("div",{children:(0,n.jsx)("p",{children:e.answer})})]}))]})})},t)})})})]})},Q=(0,m.xC)({reducer:{quizzes:v}});l.createRoot(document.getElementById("root")).render((0,n.jsx)(i.StrictMode,{children:(0,n.jsx)(d.zt,{store:Q,children:(0,n.jsx)(()=>(0,n.jsx)("div",{children:(0,n.jsx)(f.VK,{children:(0,n.jsxs)(f.Z5,{children:[(0,n.jsx)(f.AW,{path:"/",element:(0,n.jsx)(f.Fg,{to:"/quizzes",replace:!0})}),(0,n.jsx)(f.AW,{path:"/quizzes",element:(0,n.jsx)(O,{})}),(0,n.jsx)(f.AW,{path:"/quizzes/:id",element:(0,n.jsx)(k,{})})]})})}),{})})}))}},s={};function t(n){var i=s[n];if(void 0!==i)return i.exports;var l=s[n]={exports:{}};return e[n](l,l.exports,t),l.exports}t.m=e,t.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},(()=>{var e,s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;t.t=function(n,i){if(1&i&&(n=this(n)),8&i||"object"==typeof n&&n&&(4&i&&n.__esModule||16&i&&"function"==typeof n.then))return n;var l=Object.create(null);t.r(l);var r={};e=e||[null,s({}),s([]),s(s)];for(var a=2&i&&n;"object"==typeof a&&!~e.indexOf(a);a=s(a))Object.getOwnPropertyNames(a).forEach(e=>{r[e]=()=>n[e]});return r.default=()=>n,t.d(l,r),l}})(),t.d=(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},t.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];t.O=(s,n,i,l)=>{if(n){l=l||0;for(var r=e.length;r>0&&e[r-1][2]>l;r--)e[r]=e[r-1];e[r]=[n,i,l];return}for(var a=1/0,r=0;r<e.length;r++){for(var[n,i,l]=e[r],o=!0,c=0;c<n.length;c++)(!1&l||a>=l)&&Object.keys(t.O).every(e=>t.O[e](n[c]))?n.splice(c--,1):(o=!1,l<a&&(a=l));if(o){e.splice(r--,1);var d=i();void 0!==d&&(s=d)}}return s}})(),t.rv=()=>"1.3.3",(()=>{var e={980:0};t.O.j=s=>0===e[s];var s=(s,n)=>{var i,l,[r,a,o]=n,c=0;if(r.some(s=>0!==e[s])){for(i in a)t.o(a,i)&&(t.m[i]=a[i]);if(o)var d=o(t)}for(s&&s(n);c<r.length;c++)l=r[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(d)},n=self.webpackChunkquizz=self.webpackChunkquizz||[];n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n))})(),t.ruid="bundler=rspack@1.3.3";var n=t.O(void 0,["72","361","118","165"],function(){return t(3326)});n=t.O(n)})();